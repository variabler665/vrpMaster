:root{
  --bg:#05080a;
  --panel:#071014cc;
  --panel2:#071014ee;
  --grid:#0f2a26;
  --line:#22f3b6;
  --line2:#1bd39f;
  --dim:#0a6b55;
  --warn:#ffd36a;
  --bad:#ff5b7a;
  --ok:#8cffb1;
  --text:#b8ffe8;
  --muted:#66bfa3;
  --shadow:#000000aa;
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}
html,body{height:100%; margin:0; background:var(--bg); color:var(--text); font-family:var(--mono); overflow:hidden;}
canvas{position:fixed; inset:0; width:100%; height:100%;}
.hud{position:fixed; inset:0; pointer-events:none;}
.panel{
  pointer-events:auto;
  position:absolute;
  background:var(--panel);
  border:1px solid #123a33;
  box-shadow: 0 10px 30px var(--shadow);
  backdrop-filter: blur(6px);
  border-radius:12px;
}
.panel .hd{
  padding:10px 12px;
  border-bottom:1px solid #123a33;
  display:flex; gap:10px; align-items:center; justify-content:space-between;
  font-size:12px; letter-spacing:.08em; text-transform:uppercase;
  background:linear-gradient(180deg, #071c18cc, transparent);
}
.panel .bd{padding:10px 12px; font-size:12px; line-height:1.35;}
.badge{display:inline-flex; align-items:center; gap:6px; padding:3px 8px; border:1px solid #1b5c50; border-radius:999px; color:var(--text); background:#05110f99;}
.dot{width:8px; height:8px; border-radius:999px; background:var(--line);} .dot.warn{background:var(--warn);} .dot.bad{background:var(--bad);} .dot.ok{background:var(--ok);}
.toggle{background:transparent; color:var(--muted); border:1px solid #1b5c50; border-radius:6px; padding:3px 8px; cursor:pointer;}

#panelTop{left:14px; top:14px; width:360px;}
#panelRight{right:14px; top:14px; width:380px; height:calc(100% - 28px);}
#panelBottom{left:14px; bottom:14px; width:420px;}
#panelLog{right:410px; bottom:14px; width:520px; max-width:calc(100% - 860px);}

.kv{display:grid; grid-template-columns: 140px 1fr; gap:4px 10px; align-items:baseline;}
.k{color:var(--muted);} .v{color:var(--text);} .small{font-size:11px; color:var(--muted);} .sep{height:1px; background:#123a33; margin:10px 0;}
.btnbar{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px;}
button, select{
  pointer-events:auto;
  cursor:pointer;
  background:#071a16;
  color:var(--text);
  border:1px solid #1b5c50;
  padding:7px 10px;
  border-radius:8px;
  font-family:var(--mono);
  font-size:12px;
  letter-spacing:.02em;
}
button:hover, select:hover{border-color:#2df0c0;}
button:active{transform: translateY(1px);} button.primary{background:#08261f; border-color:#2df0c0;} button.danger{background:#250812; border-color:#ff5b7a;} button:disabled{opacity:.5; cursor:not-allowed;}
select{appearance:none; padding-right:26px; background-image:linear-gradient(45deg, transparent 50%, #2df0c0 50%), linear-gradient(135deg, #2df0c0 50%, transparent 50%); background-position:calc(100% - 16px) 50%, calc(100% - 10px) 50%; background-size:6px 6px, 6px 6px; background-repeat:no-repeat;}
.targets{font-size:12px; display:flex; flex-direction:column; gap:8px; height:100%;}
.filters{display:flex; flex-wrap:wrap; gap:12px; color:var(--muted);}
.list{overflow:auto; border:1px solid #123a33; border-radius:10px; background: #05110f99; padding:8px; height: 45%;}
.row{display:grid; grid-template-columns: 80px 1fr 70px 70px; gap:8px; align-items:center; padding:6px 8px; border-radius:8px; border:1px solid transparent; cursor:pointer; user-select:none;}
.row:hover{border-color:#1b5c50; background:#06201a55;} .row.sel{border-color:#2df0c0; background:#06201a99;}
.pill{display:inline-block; padding:2px 7px; border-radius:999px; border:1px solid #1b5c50; color:var(--muted); font-size:11px;} .pill.bad{border-color:#ff5b7a; color:#ffd0da;} .pill.warn{border-color:#ffd36a; color:#ffefc0;} .pill.ok{border-color:#8cffb1; color:#d7ffe3;}
.mono{font-variant-numeric: tabular-nums; font-feature-settings:"tnum" 1;}
.logbox{max-height:220px; overflow:auto; border:1px solid #123a33; border-radius:10px; padding:8px; background:#05110f99;}
.logline{padding:4px 0; border-bottom:1px dashed #123a33; color:var(--muted);} .logline b{color:var(--text); font-weight:600;}
.hint{position:fixed; left:50%; transform:translateX(-50%); bottom:10px; padding:6px 10px; background:#071014aa; border:1px solid #123a33; border-radius:10px; font-size:11px; color:var(--muted); pointer-events:none; max-width: min(980px, calc(100% - 40px)); text-align:center;}
.legend .legend-body{max-height:180px; overflow:auto; color:var(--muted);} .legend.collapsed .legend-body{display:none;}

@media (max-width:1200px){
  #panelLog{display:none;}
  #panelRight{width:360px;}
  #panelBottom{width:380px;}
}
@media (max-width:980px){
  #panelTop{width:320px;}
  #panelRight{display:none;}
  #panelBottom{width:calc(100% - 28px);}  
  .legend{display:none;}
}
